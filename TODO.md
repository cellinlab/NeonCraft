# NeonCraft 开发任务列表

## 项目概述
基于 React + TypeScript + Vite 技术栈开发的霓虹灯创作工具，支持创建、编辑灯牌并实现全屏展示效果。目标：2小时黑客松 MVP 方案。

## 核心功能需求
- ✨ 创建并编辑「灯牌」（文字 + 自定义形状）
- 🎨 支持颜色、亮度、线宽、发光等样式调节
- 📱 一键进入展示模式（全屏播放霓虹灯效果）
- 💾 本地存储（localStorage）保存灯牌模板
- ⚡ 动效支持（呼吸、闪烁等）

## 技术栈
- React + Vite + TypeScript
- react-konva (Canvas 2D 渲染)
- Zustand (状态管理)
- Tailwind CSS (样式)
- localStorage (数据持久化)

---

## 任务分解

### 1. 项目初始化设置 (T+0~15min)
- [ ] 创建 Vite + React + TypeScript 项目
- [ ] 安装依赖包：react-konva, konva, zustand, tailwindcss
- [ ] 配置 Tailwind CSS
- [ ] 设置项目目录结构
- [ ] 配置 TypeScript 和基本配置文件

### 2. 核心数据结构定义 (T+15~25min)
- [ ] 定义 TypeScript 类型：
  - [ ] `BaseProps` - 基础属性接口
  - [ ] `TextNode` - 文字节点类型
  - [ ] `PathNode` - 路径节点类型 
  - [ ] `Scene` - 场景类型
  - [ ] `NeonColor`, `ID` 等辅助类型
- [ ] 创建示例数据结构

### 3. Zustand 状态管理 (T+25~35min)
- [ ] 创建 scene store
- [ ] 实现核心 actions：
  - [ ] `setScene` - 更新场景
  - [ ] `addText` - 添加文字
  - [ ] `startDraw/pushPoint/endDraw` - 绘制流程
  - [ ] `select` - 选择元素
  - [ ] `updateNode` - 更新节点
  - [ ] `removeNode` - 删除节点
  - [ ] `bringForward/sendBackward` - 图层操作

### 4. 基础画布实现 (T+35~50min)
- [ ] 创建 `StageCanvas` 组件（基于 react-konva）
- [ ] 实现基础的 Stage 和 Layer 结构
- [ ] 添加画布背景设置
- [ ] 实现基础的点击和拖拽交互
- [ ] 设置画布尺寸和响应式

### 5. 文字功能实现 (T+50~70min)
- [ ] 实现文字添加功能
- [ ] 文字渲染（Konva.Text）
- [ ] 文字选择和 Transformer 绑定
- [ ] 文字编辑（双击编辑文本内容）
- [ ] 文字样式设置（字体、大小、颜色等）

### 6. 自由绘制功能 (T+70~90min)
- [ ] 实现绘制模式切换
- [ ] 记录鼠标轨迹点坐标
- [ ] 使用 Konva.Line 渲染路径
- [ ] 支持路径平滑（tension 参数）
- [ ] 路径样式设置

### 7. 霓虹灯效果渲染 (T+90~105min)
- [ ] 实现发光效果：
  - [ ] shadowColor 设置
  - [ ] shadowBlur 模糊半径
  - [ ] shadowOpacity 透明度控制
- [ ] 多层阴影叠加（增强光晕效果）
- [ ] 颜色和亮度动态调节

### 8. 工具栏组件 (T+105~115min)
- [ ] 创建 Toolbar 组件
- [ ] 选择工具按钮
- [ ] 文字工具按钮
- [ ] 画笔工具按钮
- [ ] 工具状态管理和切换

### 9. 属性面板 (T+115~125min)
- [ ] 创建 PropertiesPanel 组件
- [ ] 颜色选择器
- [ ] 亮度滑杆
- [ ] 线宽控制
- [ ] 发光强度设置
- [ ] 字体和字号设置（文字专用）
- [ ] 删除按钮

### 10. 图层面板 (T+125~135min)
- [ ] 创建 LayersPanel 组件
- [ ] 图层列表显示
- [ ] 图层选择功能
- [ ] 上移/下移图层
- [ ] 删除图层功能

### 11. 数据持久化 (T+135~145min)
- [ ] 实现 localStorage 保存功能
- [ ] 自动保存（debounce 500ms）
- [ ] 启动时加载数据
- [ ] 数据序列化和反序列化
- [ ] 错误处理

### 12. 展示模式 (T+145~160min)
- [ ] 创建 Player 组件
- [ ] 路由设置（/edit, /play）
- [ ] 全屏 API 实现
- [ ] 只读渲染模式
- [ ] 全局亮度/色相控制

### 13. 动画效果 (T+160~175min)
- [ ] 实现动画系统（requestAnimationFrame）
- [ ] 呼吸效果（brightness 波动）
- [ ] 闪烁效果（随机抖动）
- [ ] 全局滤镜（CSS filter）
- [ ] 动画速度控制

### 14. UI 美化和完善 (T+175~185min)
- [ ] 整体布局优化
- [ ] 深色主题设置
- [ ] 响应式设计
- [ ] 加载状态和反馈
- [ ] 错误边界处理

### 15. 示例数据和演示 (T+185~195min)
- [ ] 创建默认示例场景
- [ ] 添加预设配色方案
- [ ] 创建演示脚本
- [ ] 性能优化检查

### 16. 最终测试和打磨 (T+195~200min)
- [ ] 功能完整性测试
- [ ] 浏览器兼容性检查
- [ ] 移动端适配测试
- [ ] 性能优化
- [ ] Bug 修复

---

## 可选加分功能（时间允许）
- [ ] 导出 PNG 功能（stage.toDataURL()）
- [ ] 快捷键支持（Del删除，Ctrl+D复制等）
- [ ] 预置模板和配色
- [ ] 音频驱动亮度变化
- [ ] 撤销/重做功能

---

## 关键注意事项

### 性能优化
- 背景建议深色（#0B0F1A）提升对比度
- 限制 shadowBlur 和 strokeWidth 范围（2~40）
- 编辑时避免每帧重绘
- 展示时使用 Layer 缓存

### 用户体验
- 移动端增大命中区域
- 提供即时视觉反馈
- 自动保存防止数据丢失
- 简洁直观的操作界面

### 技术细节
- 使用 Konva.Transformer 处理选择和变换
- 路径使用 points 数组存储坐标
- 全局滤镜通过 CSS filter 实现
- localStorage 异常处理

---

## 时间分配建议
- **前 30min**: 项目搭建 + 数据结构 + 状态管理
- **30-90min**: 核心编辑功能（画布 + 文字 + 绘制）
- **90-120min**: 霓虹效果 + UI 组件
- **120-180min**: 展示模式 + 动画 + 持久化  
- **最后 20min**: 美化 + 测试 + 演示准备
